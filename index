#!/usr/bin/env python3

import argparse
import subprocess
import os

print("Indexing...")

parser = argparse.ArgumentParser()
parser.add_argument("--collections", nargs="+", type=str, required=True, help="the collection names")

args = parser.parse_args()
for name in args.collections:
    os.mkdir("/work/{}/".format(name), 777)
    subprocess.run("cp -r /work/terrier-project-5.1/ /work/{}/".format(name).split()) 
    subprocess.run("/work/{0}/terrier-project-5.1/bin/trec_setup.sh /input/collections/{0}".format(name).split())
    subprocess.run("/work/{0}/terrier-project-5.1/bin/terrier batchindexing".format(name).split())
